import Foundation



for _ in 0...1000
{
	let (a, b) = (math.random(1...1_000_000), math.random(1...1_000_000))

	let steinGCD = BIntMath.steinGcd(BInt(a), BInt(b))
	let normalGCD = BIntMath.gcd(BInt(a), BInt(b))

	if steinGCD != normalGCD { print("ERR") }
}




benchmarkPrint(title: "Al duration")
{
	print(BIntMath.steinGcd(BInt("43875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583753489275632965239465894326503252306527465108761576016654310654156135610860276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694732645626564387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375348927563296523946589432650325230652746510876157601665431065415613561086027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369473264562656"), BInt("4387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369474387528053452306543657364752644734658375027660564376576374626234567890987654323456765454829654386452369432087620650236402340623464743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694745624625443875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694743875280534523065436573647526447346583750276605643765763746262345678909876543234567654548296543864523694320876206502364023406234647438752805345230654365736475264473465837502766056437657637462623456789098765432345676545482965438645236947438752805345230654365736475264473465837502766056437657637462623456789098765432345676545482965438645236947438752805345230654365736475264473465837502766056437657637462623456789098765432345676545482965438645236947438752805345230654365736475264473465837502766056437657637462623456789098765432345676545482965438645236947438752805345230654365736475264473465837502766056437657637462623456789098765432345676545482965438645236947438752805345230654365736475264473465837502766056437657637462623456789098765432345676545482965438645236947438752805345230654365736475264473465837502766056437657637462623456789098765432345676545482965438645236947456246254")))
}



benchmarkPrint(title: "All tests pased, duration")
{
    SMP_Tests.testBaseConversionRandom()
    SMP_Tests.testBIntRandom()
    SMP_Tests.testBInt()

    MG_Matrix_Tests.testSparseMatrix()
}

//Benchmarks.BDoubleConverging()
Benchmarks.exponentiation()
Benchmarks.factorial()
Benchmarks.fibonacci()
//Benchmarks.Matrix1()
//Benchmarks.mersennes()
Benchmarks.BIntToString()
//Benchmarks.StringToBInt()
//Benchmarks.permutationsAndCombinations()











//public struct PixelData {
//    var a:UInt8 = 255
//    var r:UInt8
//    var g:UInt8
//    var b:UInt8
//}
//
//private let rgbColorSpace = CGColorSpaceCreateDeviceRGB()
//private let bitmapInfo:CGBitmapInfo = CGBitmapInfo(rawValue: CGImageAlphaInfo.premultipliedFirst.rawValue)
//
//public func imageFromARGB32Bitmap(pixels:[PixelData], width: Int, height: Int) -> CGImage {
//    let bitsPerComponent: Int = 8
//    let bitsPerPixel: Int = 32
//
//    assert(pixels.count == Int(width * height))
//
//    var data = pixels // Copy to mutable []
//    let providerRef = CGDataProvider(
//        data: NSData(bytes: &data, length: data.count * MemoryLayout<PixelData>.size)
//    )
//
//    let cgim = CGImage(
//        width: width,
//        height: height,
//        bitsPerComponent: bitsPerComponent,
//        bitsPerPixel: bitsPerPixel,
//        bytesPerRow: width * MemoryLayout<PixelData>.size,
//        space: rgbColorSpace,
//        bitmapInfo: bitmapInfo,
//        provider: providerRef!,
//        decode: nil,
//        shouldInterpolate: true,
//        intent: CGColorRenderingIntent.defaultIntent
//    )
//    return cgim!
//}
//
//
//@discardableResult
//func writeCGImage(_ image: CGImage, to destinationURL: URL) -> Bool {
//    guard let destination = CGImageDestinationCreateWithURL(destinationURL as CFURL, kUTTypePNG, 1, nil) else {
//        print("ERR")
//        return false
//
//    }
//    CGImageDestinationAddImage(destination, image, nil)
//    return CGImageDestinationFinalize(destination)
//}
//
//
//
//
//
//
//func makeAndSave()
//{
//    let dimension = 4000
//
//
//    var pixels = [PixelData]()
//
//    for i in 1...(dimension * dimension)
//    {
//        if math.isPrime(i)
//        {
//            pixels.append(PixelData(a: 255, r: 0, g: 0, b: 0))
//        }
//        else
//        {
//            pixels.append(PixelData(a: 0, r: 255, g: 255, b: 255))
//        }
//    }
//
//
//    let img = imageFromARGB32Bitmap(pixels: pixels, width: dimension, height: dimension)
//
//    let writeURL = FileManager.default.urls(for: .downloadsDirectory, in: .userDomainMask).first!.appendingPathComponent("name.png")
//
//    writeCGImage(img, to: writeURL)
//}
//
//
//
//benchmarkPrint(title: "hm")
//{
//    makeAndSave()
//}





